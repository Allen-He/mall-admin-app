(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30904278"],{"4c79":function(t,e,a){"use strict";var n=a("bb36");e["a"]={list:function(t){return n["a"].get("/products/all",{params:t})},remove:function(t){return n["a"].delete("/products/".concat(t.id))},add:function(t){return n["a"].post("/products/add",t)},lookup:function(t){return n["a"].get("/products/".concat(t))},edit:function(t){return n["a"].put("/products/edit",t)}}},"50bb":function(t,e,a){},bef4:function(t,e,a){"use strict";a("50bb")},c405:function(t,e,a){"use strict";var n=a("bb36");e["a"]={list:function(t){return n["a"].get("/category/all",{params:t})}}},e78d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products-list"},[a("Search",{attrs:{selectData:t.categoryList},on:{submit:t.submitHandle}}),a("a-button",{staticClass:"addBtn"},[a("router-link",{attrs:{to:{name:"ProductsAdd"}}},[t._v("添加商品")])],1),a("ProductsTable",{attrs:{tableDate:t.tableDate,pageConfig:t.pageConfig},on:{editProduct:t.editProduct,removeProduct:t.removeProduct,change:t.pageChange,showSizeChange:t.pageSizeChange}})],1)},o=[],i=a("5530"),r=(a("d81d"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-model",{attrs:{layout:"inline",model:t.searchForm},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",[a("a-input",{attrs:{placeholder:"请输入产品关键词"},model:{value:t.searchForm.searchWord,callback:function(e){t.$set(t.searchForm,"searchWord",e)},expression:"searchForm.searchWord"}})],1),a("a-form-model-item",[a("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:"","show-search":"",placeholder:"请选择产品类目","option-filter-prop":"children","filter-option":t.filterOption},on:{change:t.handleChange}},t._l(t.selectData,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1)],1)}),c=[],s={props:{selectData:Array},data:function(){return{searchForm:{searchWord:"",category:""}}},methods:{handleSubmit:function(){this.$emit("submit",this.searchForm)},handleChange:function(t){this.searchForm.category=t},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}},u=s,l=a("2877"),d=Object(l["a"])(u,r,c,!1,null,null,null),p=d.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products-table",staticStyle:{"margin-top":"15px"}},[a("a-table",{attrs:{columns:t.columns,"data-source":t.tableDateRender,pagination:t.pageConfig},on:{change:t.pageChange,showSizeChange:t.pageSizeChange},scopedSlots:t._u([{key:"operation",fn:function(e,n){return a("div",{},[a("a-button",{on:{click:function(e){return t.editProduct(n)}}},[t._v("编辑")]),a("a-button",{staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.removeProduct(n)}}},[t._v(" 删除 ")])],1)}}])})],1)},f=[],g=[{title:"ID",dataIndex:"id",key:"id"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"描述",dataIndex:"desc",key:"desc",ellipsis:!0},{title:"类目",dataIndex:"categoryName",key:"category",ellipsis:!0},{title:"预售价格",dataIndex:"price",key:"price"},{title:"折扣价格",dataIndex:"price_off",key:"price_off"},{title:"标签",dataIndex:"tags",key:"tags",ellipsis:!0},{title:"限制购买数量",dataIndex:"inventory",key:"inventory"},{title:"上加状态",dataIndex:"status",key:"status",customRender:function(t,e){return 0===e.status?"下架":"上架"}},{title:"操作",dataIndex:"operation",key:"operation",width:200,scopedSlots:{customRender:"operation"}}],m={props:{tableDate:Array,pageConfig:Object},data:function(){return{columns:g}},computed:{tableDateRender:function(){return this.tableDate.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{key:t.id})}))}},methods:{editProduct:function(t){this.$emit("editProduct",t)},removeProduct:function(t){this.$emit("removeProduct",t)},pageChange:function(t){this.$emit("change",t)},pageSizeChange:function(t,e){this.$emit("showSizeChange",e)}}},b=m,y=Object(l["a"])(b,h,f,!1,null,null,null),v=y.exports,C=a("c405"),k=a("4c79"),x={components:{Search:p,ProductsTable:v},data:function(){return{searchForm:{},categoryList:[],tableDate:[],pageConfig:{pageSizeOptions:["10","20","30"],current:1,pageSize:10,total:0,showSizeChanger:!0}}},methods:{submitHandle:function(t){this.searchForm=Object(i["a"])({},t),this.getTableData()},getTableData:function(){var t=this;k["a"].list(Object(i["a"])({page:this.pageConfig.current,size:this.pageConfig.pageSize},this.searchForm)).then((function(e){t.pageConfig.total=e.total,t.tableDate=e.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{categoryName:t.categoryList[e.category-1]?t.categoryList[e.category-1].name:""})}))}))},editProduct:function(t){this.$router.push({name:"ProductEdit",params:{id:t.id}})},removeProduct:function(t){var e=this,a=this.$createElement;console.log(t),this.$confirm({title:"注意",content:function(){return a("div",['确定要删除标题为"',t.title,'"的商品吗？'])},okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){k["a"].remove({id:t.id}).then((function(){e.getTableData()}))},onCancel:function(){return!1}})},pageChange:function(t){this.pageConfig=t,this.getTableData()},pageSizeChange:function(t,e){this.pageConfig.pageSize=e}},created:function(){var t=this;C["a"].list().then((function(e){t.categoryList=e.data})),this.getTableData()}},S=x,D=(a("bef4"),Object(l["a"])(S,n,o,!1,null,"40c338b6",null));e["default"]=D.exports}}]);
//# sourceMappingURL=chunk-30904278.82685527.js.map